(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3856],{73856:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return J},default:function(){return q}});var n=r(85893),i=r(88547),s=r(26057),a=r(33299),l=r(68805),o=r(67294),d=r(78057),c=r.n(d),u=r(45882),x=r(41664),h=r.n(x),p=r(24623),f=r(20979),m=r(69544),g=r(8891),j=r.n(g),k=function(e){var t=e.userId,r=e.link,i=e.setLink,s=(0,o.useState)(r),a=s[0],l=s[1],d=(0,o.useState)(""),u=d[0],x=d[1],h=(0,m.T1)(),g=(0,p.d)(),k=(0,o.useCallback)(function(){try{var e=function(e){if(!(e=e.trim()).length)return"";if(e.includes("://")||(e="http://"+e),!["http","https"].includes(e.split("://")[0]))throw Error("Only http and https URLs are allowed");try{return new URL(e).toString()}catch(t){throw Error("URL not valid")}}(a);x(""),l(e);var n=new URL("/api/user",window.location.origin);n.searchParams.set("id",t),fetch(n.toString(),{method:"PATCH",body:JSON.stringify({link:e})}).then(function(e){if(200===e.status){j().track("Saved profile link");return}throw Error()}).catch(function(e){console.error(e),i(r),h("Couldn't update link")}),i(e),g.closeModal()}catch(s){x(s.message);return}},[h,t,a,r,i,g]);return(0,n.jsxs)("div",{className:"bg-gray-90 h-auto w-[90vw] md:w-[500px] flex flex-col text-sm text-gray-25",children:[(0,n.jsx)("header",{className:"py-4 px-8 border-b border-gray-85",children:(0,n.jsx)("h1",{className:"title-primary",children:"Add a link to your profile"})}),(0,n.jsx)("div",{className:"h-full flex justify-start p-8",children:(0,n.jsxs)("div",{className:"flex flex-col w-full gap-y-2",children:[(0,n.jsx)("p",{children:"Link to your personal website, portfolio, or social media account"}),(0,n.jsx)("div",{children:(0,n.jsx)(f.BZ,{className:c().profile__add_link_input,children:(0,n.jsx)(f.II,{placeholder:"Enter URL",className:"!bg-gray-95",value:a,onChange:function(e){return l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),k())},autoFocus:!0})})}),u&&(0,n.jsx)("div",{className:"text-dark-pink flex justify-start",children:u})]})}),(0,n.jsx)("footer",{className:"border-t border-gray-85",children:(0,n.jsxs)("div",{className:"flex justify-end py-6 px-8 gap-4",children:[(0,n.jsx)("button",{className:"button button-secondary",onClick:function(){g.closeModal()},children:"Cancel"}),(0,n.jsx)("button",{className:"button button-primary border-none",onClick:k,disabled:!r&&0===a.length,children:r&&!a&&"Remove"||"Save"})]})})]})},v=r(26094),b=r(31763);function y(){return(0,n.jsxs)("svg",{width:"18",height:"21",viewBox:"0 0 18 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M1.49609 7.97591C1.49609 7.03242 2.26094 6.26758 3.20443 6.26758H12.1732C13.1167 6.26758 13.8815 7.03242 13.8815 7.97591V15.2363C13.8815 16.1798 13.1167 16.9447 12.1732 16.9447H3.20443C2.26094 16.9447 1.49609 16.1798 1.49609 15.2363V7.97591Z",stroke:"#C0C0C3",strokeWidth:"1.1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M4.27148 4.55859V7.54818",stroke:"#C0C0C3",strokeWidth:"1.1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M11.1055 4.55859V7.54818",stroke:"#C0C0C3",strokeWidth:"1.1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M4.05859 9.68359H11.319",stroke:"#C0C0C3",strokeWidth:"1.1",strokeLinecap:"round",strokeLinejoin:"round"})]})}var w=r(55043),N=r(92930),_=r(46271);function C(e){var t=e.createdAt,r=(0,o.useMemo)(function(){var e=new Date(t),r=e.toLocaleString("default",{month:"short"}),n=e.getFullYear();return"".concat(r," ").concat(n)},[t]);return t?(0,n.jsxs)("p",{className:"text-gray-25 flex gap-1 items-center pt-px font-510 text-[15px]",children:[(0,n.jsx)(y,{})," Joined ",r]}):null}function L(e){var t=e.userId,r=w.t.useUserPlans(t);return w.t.useUserHasPermission("accounts:manage")&&r.data?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h(),{href:"/admin/accounts/manage?id=".concat(t),children:(0,n.jsxs)("a",{className:"text-sm text-gray-10 p-0.5 bg-orange-500/10 border border-orange-500/50 hover:border-orange-500 pl-2 pr-1.5 rounded-md font-medium flex gap-1 items-center ml-3",target:"_blank",children:[r.data&&r.data.length?(0,N.Bc)(r.data,{includeAnnual:!0}).join(", "):"Free",(0,n.jsx)(_.Z,{size:16,className:"text-gray-25"})]})}),(0,n.jsx)(h(),{href:"/admin/errors?id=".concat(t),children:(0,n.jsxs)("a",{className:"text-sm text-gray-10 p-0.5 bg-orange-500/10 border border-orange-500/50 hover:border-orange-500 pl-2 pr-1.5 rounded-md font-medium flex gap-1 items-center ml-3",target:"_blank",children:["Errors",(0,n.jsx)(_.Z,{size:16,className:"text-gray-25"})]})})]}):null}var S=function(e){var t,r,i=e.name,s=e.userId,a=e.likeCount,l=e.avatar,d=e.followerIds,x=e.followingIds,f=e.currentUserId,m=e.userLink,g=e.isOwnProfile,j=e.createdAt,y=(0,o.useState)(d.includes(f)),N=y[0],_=y[1],S=(0,o.useState)(d.length),I=S[0],P=S[1],M=function(){P(I+1),_(!0)},A=function(){P(I-1),_(!1)},O=w.t.useUserHasPermission("accounts:manage"),W=(0,o.useState)(m),B=W[0],U=W[1],Z=(0,p.d)(),F=(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:c().profile__header_friendship_count+" flex gap-y-2 gap-x-8 md:gap-x-4 font-510 text-gray-25",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold text-white",children:I.toLocaleString("en-US")}),"\xa0","follower".concat(1==I?"":"s")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold text-white",children:x.length.toLocaleString("en-US")}),"\xa0following"]}),void 0!==a&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold text-white",children:(a||0).toLocaleString("en-US")}),"\xa0",1===a?"like":"likes"]})]}),(0,n.jsxs)("div",{className:"mt-2 flex max-md:flex-col items-center gap-3",children:[(0,n.jsx)(C,{createdAt:j}),(B||g)&&(0,n.jsx)("p",{className:"flex text-[15px]",children:B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("a",{href:B,target:"_blank",rel:"noreferrer noopener",className:"text-button align-middle truncate",style:{maxWidth:"min(calc(80vw), 24rem)"},children:[(0,n.jsx)(v.x,{className:"!inline-block align-middle mr-1",width:20,height:20}),(0,n.jsx)("span",{className:"align-middle font-510 -translate-y-px inline-block",children:(r=B.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")).endsWith("/")?r.slice(0,-1):r})]}),g&&(0,n.jsx)(h(),{href:"#",target:"_blank",className:"inline-block align-middle",children:(0,n.jsx)("button",{className:"text-gray-50 !inline-block align-middle ml-3 hover:text-gray-25 transition-colors font-510",type:"submit",onClick:function(e){e.stopPropagation(),Z.setModalContent((0,n.jsx)(k,{userId:s,link:B,setLink:U}),{transitionModal:!0})},children:(0,n.jsx)("span",{className:"!inline-block align-middle hover:text-white -ml-1",children:(0,n.jsx)(b.lr,{width:20,height:20})})})})]}):g&&(0,n.jsx)(h(),{href:"#",children:(0,n.jsxs)("button",{className:"text-button",type:"submit",onClick:function(e){e.stopPropagation(),Z.setModalContent((0,n.jsx)(k,{userId:s,link:"",setLink:U}),{transitionModal:!0})},children:[(0,n.jsx)(v.Z,{className:"!inline-block align-middle mr-1",width:18,height:18}),(0,n.jsx)("span",{className:"inline-block align-middle font-510",children:"Add Link"})]})})})]})]});return(0,n.jsxs)("div",{className:"py-7 px-5 bg-gray-90",children:[(0,n.jsxs)("div",{className:"flex gap-x-5 items-center",children:[(0,n.jsx)("img",{src:l,alt:"".concat(i," avatar"),className:"!aspect-square flex-none rounded-md w-20 h-20 md:w-[100px] md:h-[100px]"}),(0,n.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-3 md:gap-4 flex-grow items-start md:items-center flex-col md:flex-row",children:[(0,n.jsx)("h3",{className:"text-[26px] font-bold text-white",children:i}),(0,n.jsxs)("div",{className:"flex",children:[f!=s&&(0,n.jsx)(u.Z,{isFollowing:N,userId:s,name:i,handleFollow:M,handleUnfollow:A,source:"profile"}),O&&(0,n.jsx)(L,{userId:s})]})]}),(0,n.jsx)("div",{className:"hidden md:block",children:F})]})]}),(0,n.jsx)("div",{className:"flex justify-center pt-3 md:hidden",children:F})]})},I=r(18034),P=r(53262),M=r(66118),A=r(92407),O=r(81575),W=r(10435),B=r(62469),U=O.t3.MenubarCheckboxItem;function Z(e){var t=e.children,r=e.style;return(0,n.jsx)(W.rQ,{style:r,className:"py-[7px] flex items-center justify-between gap-2 rounded-md px-3 text-gray-25 border border-gray-85 text-sm font-medium",children:t})}function F(e){var t=e.children;return(0,n.jsx)(O.t3.MenubarContent,{align:"end",style:{minWidth:"150px"},sideOffset:5,alignOffset:-3,children:t})}var E=function(e){var t=e.filter,r=e.setFilter,i=[{id:s.mY.All,label:"All images"},{id:s.mY.Public,label:"Public images"},{id:s.mY.Private,label:"Private images"},],a=i.find(function(e){return e.id===t});return(0,n.jsx)(W.fC,{children:(0,n.jsxs)(W.v2,{children:[(0,n.jsxs)(Z,{style:{width:"150px"},children:[null==a?void 0:a.label,(0,n.jsx)(A._M,{width:14})]}),(0,n.jsx)(W.h_,{children:(0,n.jsx)(F,{children:i.map(function(e){var i=t===e.id;return(0,n.jsxs)(U,{id:e.id,checked:i,onClick:function(){return r(e.id)},"data-variant":i?"p-tight":"inset",children:[(0,n.jsx)(W.AO,{className:"mr-0.5",children:(0,n.jsx)(B.nQG,{})}),e.label]},e.id)})})})]})})};function D(e){var t=e.sortBy,r=e.setSortBy,i=[{id:s.I5.Newest,label:"Newest"},{id:s.I5.Oldest,label:"Oldest"},{id:s.I5.MostLiked,label:"Most Liked"},],a=i.find(function(e){return e.id===t});return(0,n.jsx)(W.fC,{className:"h-[100%]",children:(0,n.jsxs)(W.v2,{children:[(0,n.jsxs)(Z,{style:{width:"130px"},children:[null==a?void 0:a.label,(0,n.jsx)(A._M,{width:14})]}),(0,n.jsx)(W.h_,{children:(0,n.jsx)(F,{children:i.map(function(e){var i=t===e.id;return(0,n.jsxs)(U,{id:e.id,checked:i,onClick:function(){return r(e.id)},"data-variant":i?"p-tight":"inset",children:[(0,n.jsx)(W.AO,{className:"mr-0.5",children:(0,n.jsx)(B.nQG,{})}),e.label]},e.id)})})})]})})}function H(){return(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M8.75 8.75L13 19.25L14.25 14.25L19.25 13L8.75 8.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 15L19.25 19.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M4.75 4.75L6.25 6.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M13.25 4.75L11.75 6.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M17.75 17.75L19.25 19.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M6.25 11.75L4.75 13.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})}var R=r(40247),Y=r(86010),V=function(e){var t=e.userId,r=e.tab,i=e.sortBy,a=e.setSortBy,l=e.isOwnProfile,o=e.filter,d=e.setFilter,u=e.isSticky,x=e.isAdmin,p=void 0!==x&&x,f=Object.keys(s.Dt).indexOf(r),m=r===s.Dt.Likes,g=(0,R.dW)(function(e){return e.active}),j=function(){return R.dW.getState().setActive(!g)},k=function(){return R.dW.getState().reset()};return(0,n.jsxs)("div",{className:(0,Y.Z)("flex justify-between px-5 pt-5 flex-col sm:flex-row gap-5 bg-gray-99 z-[8]",u?"fixed top-[48px] w-full pb-3":"pb-5"),children:[(0,n.jsx)("div",{children:l&&(0,n.jsx)(I.mQ,{variant:"soft-rounded",colorScheme:"gray",defaultIndex:f||0,children:(0,n.jsxs)(I.td,{className:c().tabs,style:{gap:"5px"},children:[(0,n.jsx)(h(),{href:"/profile/"+t,children:(0,n.jsxs)(I.OK,{style:{display:"flex",flexDirection:"row",gap:"8px"},children:[(0,n.jsx)(P.Z,{}),"My Images"]})}),(0,n.jsx)(h(),{href:"/profile/likes/"+t,children:(0,n.jsxs)(I.OK,{style:{display:"flex",flexDirection:"row",gap:"8px"},children:[(0,n.jsx)(M.Z,{}),"My Likes"]})})]})})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(l||p)&&(0,n.jsxs)("button",{className:(0,Y.Z)("hidden md:flex items-center bg-transparent h-[36px] pl-2 pr-3 py-0 gap-1 text-sm text-gray-25 font-medium border-[1px] rounded-md border-solid border-gray-85 hover:border-gray-75 focus:ring-0",g&&"border-purple-primary1 hover:border-purple-primary"),onClick:g?k:j,children:[(0,n.jsx)(H,{}),(0,n.jsx)("span",{className:"m-0 p-0",children:g?"Stop Selecting":"Select Images"})]}),(0,n.jsx)(D,{sortBy:i,setSortBy:a}),(l&&!m||p)&&(0,n.jsx)(E,{filter:o,setFilter:d})]})]})},Q=r(9008),T=r.n(Q),z=r(11163),G=r(49770),K=r(16817),J=!0;function q(e){var t,r,d,c=e.user,u=e.initialImages,x=e.currentUserId,h=e.followerIds,p=e.followingIds,f=e.initialCursor,m=e.tab,g=e.isOwnProfile;e.createdAt;var k=(0,o.useRef)(null),v=u.reduce(function(e,t){return t.likeCount>e.likeCount?t:e},u[0]),b=(0,o.useState)(s.I5.Newest),y=b[0],N=b[1],_=(0,o.useState)(s.mY.All),C=_[0],L=_[1];(0,o.useEffect)(function(){j().track("Viewed profile",{tab:m})},[c.id,m]);var I=(0,a.useSession)(),P=w.t.useUserHasPermission("moderation:images:private"),M=g&&I?null===(t=I.data)||void 0===t?void 0:t.user.db.displayName:c.displayName,A=(0,o.useState)("profile"+c.id+m),O=A[0],W=A[1];(0,o.useEffect)(function(){O!=="profile"+c.id+m&&(W("profile"+c.id+m),N(s.I5.Newest),L(s.mY.All))},[c.id,m,O]);var B=(0,o.useState)(!1),U=B[0],Z=B[1];(0,o.useEffect)(function(){if(window&&window.innerWidth<768){Z(!1);return}window.onscroll=function(){window.pageYOffset>146?Z(!0):Z(!1)}},[]);var F=(0,z.useRouter)();(0,o.useEffect)(function(){var e=function(){return R.dW.getState().reset()};return F.events.on("routeChangeStart",e),function(){F.events.off("routeChangeStart",e)}},[F.events]);var E=(0,G.Z)(c?"/api/user/likeCount?id=".concat(c.id):null,K.S).data,D=null==E?void 0:E.likeCount;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T(),{children:[(0,n.jsx)("meta",{property:"og:image",content:null!==(r=(null==v?void 0:v.url)||c.image)&&void 0!==r?r:void 0}),(0,n.jsx)("meta",{property:"og:image:type",content:"image/png"}),(0,n.jsx)("meta",{property:"og:image:alt",content:"Playground"}),(0,n.jsx)("title",{children:"".concat(M," - Playground")}),(0,n.jsx)("meta",{property:"og:title",content:"".concat(M," - Playground")}),(0,n.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{property:"twitter:title",content:"".concat(M," - Playground")}),(0,n.jsx)("meta",{property:"twitter:image",content:null!==(d=(null==v?void 0:v.url)||c.image)&&void 0!==d?d:void 0}),(0,n.jsx)("meta",{property:"twitter:description",content:"View images"}),(0,n.jsx)("meta",{property:"twitter:url",content:"https://playgroundai.com".concat(F.asPath)})]}),(0,n.jsxs)(i.Z,{disableTitle:!0,children:[(0,n.jsx)(n.Fragment,{}),c.disabled&&(0,n.jsx)("div",{className:"bg-orange-400 text-white font-bold p-1 px-8",children:"This user is disabled and is not visible publicly"}),(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(S,{userId:c.id,createdAt:c.createdAt,name:M,avatar:c.image,followerIds:h,followingIds:p,currentUserId:x,likeCount:D,userLink:c.link,isOwnProfile:g},c.id),(0,n.jsx)(V,{userId:c.id,tab:m,sortBy:y,filter:C,setFilter:function(e){L(e),R.dW.getState().selectAll([])},isOwnProfile:g,setSortBy:function(e){Object.values(s.I5).includes(e)?N(e):console.error("Invalid sort by value: ",e)},isSticky:U,isAdmin:P}),(0,n.jsx)("div",{id:"scroll-container",className:(0,Y.Z)("p-[20px]",U?"pt-[82px]":"pt-0"),ref:k,children:(0,n.jsx)(l.Z,{initialImages:u,initialCursor:f,options:{url:"/api/images/user",params:{id:c.id,likedImages:m===s.Dt.Likes,sortBy:y,filter:C}},sortBy:y,filter:C,groupBatchedImages:!0,hideProfileImages:!0},O)})]})]})]})}},78057:function(e){e.exports={profile__header_avatar:"Profile_profile__header_avatar__0BNHY",profile__header_friendship_count:"Profile_profile__header_friendship_count__7Gl8V",profile__add_link_input:"Profile_profile__add_link_input__4LLXE"}}}]);